<!DOCTYPE html>
<html>
  <head>
    <title>Chatbot</title>
  </head>
  <body>
    <div class="js-container"></div>
    

    <script src="react-basics.js"></script>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">

      function ChatInput(){
        return(
          <>
            <input 
            placeholder = "Send a message to Chatbot"
            size="30"
            />
            <button>Send</button>
          </>
        );
      }

      function ChatMessage({message,sender}){
        // const message = props.message;
        // const sender = props.sender;

        //const {message ,sender} = props;

        /*if(sender=="robot"){
           return(
          <div>
            <img src="robot.png" width = "50" />
            {message}
          </div>
        );
        }*/
        return(
          <div>
            {sender === "robot" && (
              <img src="robot.png" width = "50" />        
            )}
            {message}
            {sender ==="user" && (
              <img src="user.png" width = "50" />
            )}
          </div>
        );
      }

      function ChatMessages(){

        const array = React.useState([{
          message : "hello chatbot",
          sender :"user",
          id : "id1"
        },{
           message :"hello! how can I hep you?",
           sender:"robot",
           id : "id2"
        },{
            message :"can you get me todays date?",
            sender:"user",
            id : "id3"
        },{
            message : "Today is October 27", 
            sender : "robot",
            id : "id4"
        }])
        const ChatMessages = array[0];
        const setChatMessages = array[1];

        function SendMessage(){
          setChatMessages([...ChatMessages,{
            message: "test",
            sender: "user",
            id: crypto.randomUUID()
          }])
        }

        

        // function SendMessage(){
        //   ChatMessages.push({
        //     message : "test",
        //     sender : "user",
        //     id : crypto.randomUUID()
        //   });
        //   console.log(ChatMessages);
        // }

        const chatMessageComponents = ChatMessages.map((chatMessage)=>{
            return(
              <ChatMessage
                message = {chatMessage.message}
                sender = {chatMessage.sender}
                key = {chatMessage.id}
              />
            );
        });

          return (
              <>
                <button onClick ={SendMessage}>Send Meassage</button>
                {chatMessageComponents}
                
              </>
          )
      }

      function App(){
        return(
          <>
            <ChatInput />
            <ChatMessages />
            
          </>
        );
      }

      

      

      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render(<App/>);
    </script>
  </body>
</html>